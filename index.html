<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MSAMBWENI TECHNICAL AND VOCATIONAL COLLEGE Portal</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Roboto',sans-serif;}
body{line-height:1.6;color:#333;background:#f4f4f4;}
a{text-decoration:none;color:inherit;}
img{max-width:100%;display:block;}
header{background:#0d47a1;color:#fff;padding:1rem 0;position:sticky;top:0;z-index:1000;}
nav{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto;padding:0 1rem;}
nav .logo{font-size:1.5rem;font-weight:bold;display:flex;align-items:center;gap:0.5rem;}
nav .logo img{height:80px;width:80px;border-radius:5px;}
nav ul{list-style:none;display:flex;gap:1rem;position:relative;}
nav ul li{position:relative;padding:0.5rem;}
nav ul li a{color:#fff;font-weight:500;}
nav ul li a:hover{text-decoration:underline;}
nav ul li ul{display:none;position:absolute;top:2.5rem;left:0;background:#1976d2;list-style:none;padding:0.5rem 0;border-radius:5px;min-width:180px;}
nav ul li ul li{padding:0.5rem 1rem;}
nav ul li ul li a{color:#fff;}
nav ul li:hover ul{display:block;}
#hero{background:linear-gradient(135deg,#0d47a1,#1976d2,#42a5f5);color:#fff;padding:4rem 1rem;text-align:center;}
#hero h1{font-size:2.5rem;margin-bottom:1rem;}
#hero p{font-size:1.2rem;margin-bottom:2rem;}
#hero button{padding:0.8rem 2rem;background:#fff;color:#0d47a1;border:none;font-weight:bold;cursor:pointer;border-radius:5px;transition:0.3s;}
#hero button:hover{background:#e3f2fd;}
section{padding:4rem 1rem;max-width:1200px;margin:0 auto;}
section h2{text-align:center;font-size:2rem;margin-bottom:2rem;color:#0d47a1;border-bottom:2px solid #1976d2;display:inline-block;padding-bottom:0.5rem;}
#about{background:#e3f2fd;}
#about p{max-width:900px;margin:0 auto 1rem auto;font-size:1.1rem;}
#about ul{max-width:900px;margin:0 auto;margin-top:1rem;list-style:disc;padding-left:1.5rem;}
#courses{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;}
.course{background:#fff;padding:1.5rem;border-radius:10px;box-shadow:0 4px 6px rgba(0,0,0,0.1);transition:0.3s;}
.course:hover{transform:translateY(-5px);box-shadow:0 6px 12px rgba(0,0,0,0.15);}
.course h3{margin-bottom:0.5rem;color:#0d47a1;}
.course p{font-size:0.95rem;}
#library{background:#f1f8e9;}
#library input,#library button{padding:0.7rem;border-radius:5px;border:1px solid #0d47a1;margin-right:0.5rem;}
#library button{background:#0d47a1;color:#fff;cursor:pointer;border:none;}
#library button:hover{background:#1976d2;}
#library #results{margin-top:1rem;}
#masomo{background:#fff;display:flex;justify-content:center;flex-direction:column;align-items:center;}
#masomo ul{list-style:none;}
#masomo li{padding:0.5rem 0;}
#masomo a{color:#0d47a1;font-weight:bold;}
#announcements{background:#e8f5e9;max-width:900px;margin:0 auto;border-radius:10px;padding:1rem;}
.announcement{background:#c8e6c9;margin-bottom:1rem;padding:1rem;border-radius:5px;}
#portal{background:#fff;display:flex;justify-content:center;align-items:center;flex-direction:column;}
#portal form{display:flex;flex-direction:column;max-width:300px;width:100%;gap:1rem;}
#portal input{padding:0.8rem;border:1px solid #ccc;border-radius:5px;}
#portal button{padding:0.8rem;border:none;border-radius:5px;background:#0d47a1;color:#fff;cursor:pointer;font-weight:bold;}
#portal button:hover{background:#1976d2;}
#admin{background:#f3e5f5;display:flex;flex-direction:column;align-items:center;padding:2rem;}
#admin form{display:flex;flex-direction:column;max-width:400px;width:100%;gap:1rem;}
#admin input{padding:0.8rem;border:1px solid #ccc;border-radius:5px;}
#admin button{padding:0.8rem;border:none;border-radius:5px;background:#8e24aa;color:#fff;cursor:pointer;font-weight:bold;}
#admin button:hover{background:#ba68c8;}
#contact form{display:flex;flex-direction:column;max-width:500px;margin:0 auto;gap:1rem;}
#contact input,#contact textarea{padding:0.8rem;border:1px solid #ccc;border-radius:5px;}
#contact button{padding:0.8rem;border:none;border-radius:5px;background:#0d47a1;color:#fff;cursor:pointer;font-weight:bold;}
#contact button:hover{background:#1976d2;}
footer{background:#0d47a1;color:#fff;text-align:center;padding:1rem;margin-top:2rem;}
@media(max-width:768px){nav ul{flex-direction:column;gap:0.5rem;}#hero h1{font-size:2rem;}}
</style>
</head>
<body>

<header>
<nav>
  <div class="logo">
    <img src="logo.jpg" alt="MSAMBWENI TVC Logo"> MSAMBWENI TECHNICAL AND VOCATIONAL COLLEGE
  </div>
  <ul>
    <li><a href="#hero">Home</a></li>
    <li><a href="#about">About</a></li>
    <li>
      <a href="#academics">Academics</a>
      <ul>
        <li><a href="#courses">Programs</a></li>
        <li><a href="#courses">Departments</a></li>
        <li><a href="#courses">Special Courses</a></li>
      </ul>
    </li>
    <li><a href="#announcements">Announcements</a></li>
    <li><a href="#library">Library</a></li>
    <li><a href="#masomo">Masomo</a></li>
    <li><a href="#admin">Admin Upload</a></li>
    <li><a href="#contact">Contact</a></li>
  </ul>
</nav>
</header>

<section id="hero">
<h1>Welcome to MSAMBWENI TECHNICAL AND VOCATIONAL COLLEGE</h1>
<p>Your gateway to excellence in education and innovation.</p>
<button onclick="alert('Enroll Now Clicked!')">Enroll Now</button>
</section>

<section id="about">
<h2>About Us</h2>
<p><strong>Mission:</strong> To provide quality education and practical skills.</p>
<p><strong>Vision:</strong> To be a leading institution recognized for excellence in teaching and research.</p>
<p><strong>History:</strong> Established in 1995, MSAMBWENI TVC has grown into a modern institution offering diverse programs.</p>
<p><strong>Facilities:</strong></p>
<ul>
<li>Lecture halls, computer labs, libraries, sports complex, hostels.</li>
</ul>
</section>

<section id="courses">
<h2>Our Courses</h2>
<div class="course">
<h3>ICT</h3>
<p>Information and Communication Technology, programming, networking, hardware maintenance.</p>
</div>
<div class="course">
<h3>Business Management</h3>
<p>Leadership, entrepreneurship, management.</p>
</div>
<div class="course">
<h3>Engineering</h3>
<p>Civil, Electrical, Mechanical engineering.</p>
</div>
</section>

<section id="announcements">
<h2>Announcements</h2>
<div id="announcementsList"></div>
</section>

<section id="library">
<h2>Virtual Library</h2>
<p>Search and download books:</p>
<input type="text" id="bookSearch" placeholder="Enter book name">
<button onclick="searchBook()">Search</button>
<div id="results"></div>
</section>

<section id="masomo">
<h2>Masomo / Courses Portal</h2>
<form id="masomoForm" onsubmit="masomoLogin(event)">
<input type="text" id="masomoId" placeholder="Student ID" required>
<input type="password" id="masomoPw" placeholder="Password" required>
<button type="submit">Login</button>
</form>
<ul id="courseFiles" style="margin-top:1rem;"></ul>
<p id="masomoMessage" style="color:red;margin-top:0.5rem;"></p>
</section>

<section id="portal">
<h2>Student Portal</h2>
<form id="loginForm" onsubmit="studentLogin(event)">
<input type="email" id="studentEmail" placeholder="Email" required>
<input type="password" id="studentPw" placeholder="Password" required>
<button type="submit">Login</button>
</form>
<button onclick="createAccount()" style="margin-top:0.5rem;background:#42a5f5;">Create Account</button>
<p id="loginMessage" style="margin-top:1rem;color:red;"></p>
</section>

<section id="admin">
<h2>Admin Upload Portal</h2>
<form id="adminForm" onsubmit="uploadData(event)">
<input type="text" id="fileName" placeholder="File Name" required>
<input type="url" id="fileURL" placeholder="File URL" required>
<select id="fileType">
  <option value="courseFiles">Course File</option>
  <option value="libraryBooks">Library Book</option>
</select>
<button type="submit">Upload</button>
<p id="adminMessage" style="margin-top:0.5rem;color:red;"></p>
</form>
</section>

<section id="contact">
<h2>Contact Us</h2>
<form id="contactForm" onsubmit="submitContact(event)">
<input type="text" placeholder="Full Name" id="fullName" required>
<input type="email" placeholder="Email Address" id="email" required>
<textarea placeholder="Message" id="message" rows="5" required></textarea>
<button type="submit">Send Message</button>
</form>
<p id="contactMessage" style="margin-top:1rem;color:green;"></p>
</section>

<footer>
&copy; 2026 MSAMBWENI TECHNICAL AND VOCATIONAL COLLEGE. All rights reserved.
</footer>

<script type="module">
// Firebase
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore, collection, getDocs, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDMxeTX31Uj9L7eMpY8IyfnYxHBNQV7IXs",
  authDomain: "studio-3268737377-cc795.firebaseapp.com",
  projectId: "studio-3268737377-cc795",
  storageBucket: "studio-3268737377-cc795.firebasestorage.app",
  messagingSenderId: "640227749188",
  appId: "1:640227749188:web:2bfbb211dd375f92e37b11"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

// Student Login
async function studentLogin(e){
  e.preventDefault();
  const email = document.getElementById("studentEmail").value;
  const password = document.getElementById("studentPw").value;
  const msg = document.getElementById("loginMessage");
  msg.style.color="blue"; msg.innerText="Logging in...";
  try{
    await signInWithEmailAndPassword(auth,email,password);
    msg.style.color="green"; msg.innerText="Login Successful!";
  } catch(err){
    msg.style.color="red"; msg.innerText=err.message;
  }
}

// Create Account
async function createAccount(){
  const email = document.getElementById("studentEmail").value;
  const password = document.getElementById("studentPw").value;
  const msg = document.getElementById("loginMessage");
  msg.style.color="blue"; msg.innerText="Creating account...";
  try{
    await createUserWithEmailAndPassword(auth,email,password);
    msg.style.color="green"; msg.innerText="Account Created Successfully!";
  } catch(err){
    msg.style.color="red"; msg.innerText=err.message;
  }
}

// Masomo Portal
async function masomoLogin(e){
  e.preventDefault();
  const id = document.getElementById("masomoId").value;
  const pw = document.getElementById("masomoPw").value;
  const msg = document.getElementById("masomoMessage");
  const filesList = document.getElementById("courseFiles");
  msg.style.color="blue"; msg.innerText="Logging in...";
  filesList.innerHTML = "<li>Loading course files...</li>";
  try{
    await signInWithEmailAndPassword(auth,id+"@msambweni.com",pw);
    msg.style.color="green"; msg.innerText="Login successful!";
    loadCourseFiles();
  } catch(err){
    msg.style.color="red"; msg.innerText=err.message;
    filesList.innerHTML="";
  }
}
async function loadCourseFiles(){
  const filesList=document.getElementById("courseFiles");
  filesList.innerHTML="";
  const snapshot = await getDocs(collection(db,"courseFiles"));
  if(snapshot.empty){ filesList.innerHTML="<li>No course files available.</li>"; return;}
  snapshot.forEach(doc=>{
    const data=doc.data();
    const li=document.createElement("li");
    li.innerHTML=`<a href="${data.file}" target="_blank">${data.name}</a>`;
    filesList.appendChild(li);
  });
}

// Library
async function searchBook(){
  const queryVal = document.getElementById("bookSearch").value.toLowerCase();
  const resultsDiv = document.getElementById("results");
  resultsDiv.innerHTML = "Searching...";
  const snapshot = await getDocs(collection(db,"libraryBooks"));
  let html="<ul>"; let found=false;
  snapshot.forEach(doc=>{
    const data=doc.data();
    if(data.name.toLowerCase().includes(queryVal)){
      html+=`<li>${data.name} - <a href="${data.file}" target="_blank" onclick="trackDownload('${data.name}')">Download</a></li>`;
      found=true;
    }
  });
  html+="</ul>";
  resultsDiv.innerHTML = found ? html : "<p>No books found.</p>";
}
async function trackDownload(bookName){
  await addDoc(collection(db,"downloads"),{book:bookName,timestamp:new Date()});
}

// Announcements
async function loadAnnouncements(){
  const list=document.getElementById("announcementsList");
  list.innerHTML="Loading announcements...";
  const snapshot = await getDocs(collection(db,"announcements"));
  list.innerHTML="";
  if(snapshot.empty){ list.innerHTML="<p>No announcements at the moment.</p>"; return;}
  snapshot.forEach(doc=>{
    const div=document.createElement("div");
    div.className="announcement";
    div.innerHTML=doc.data().title+": "+doc.data().details;
    list.appendChild(div);
  });
}
loadAnnouncements();

// Admin Upload
async function uploadData(e){
  e.preventDefault();
  const name = document.getElementById("fileName").value;
  const url = document.getElementById("fileURL").value;
  const type = document.getElementById("fileType").value;
  const msg = document.getElementById("adminMessage");
  msg.style.color="blue"; msg.innerText="Uploading...";
  try{
    await addDoc(collection(db,type),{name:name,file:url});
    msg.style.color="green"; msg.innerText="Upload successful!";
    document.getElementById("adminForm").reset();
  } catch(err){
    msg.style.color="red"; msg.innerText=err.message;
  }
}

// Contact Form
function submitContact(e){
  e.preventDefault();
  const msg=document.getElementById("contactMessage");
  msg.style.color="blue"; msg.innerText="Sending message...";
  setTimeout(()=>{
    msg.style.color="green"; msg.innerText="Message sent!";
    document.getElementById("contactForm").reset();
  },800);
}
</script>
</body>
</html>
