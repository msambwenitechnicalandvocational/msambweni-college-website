<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Msambweni TVC Complete Portal</title>
<style>
:root{--blue:#0d47a1;--yellow:#fbc02d}
body{margin:0;font-family:Segoe UI,Arial,sans-serif;background:#f4f7fb}
header{background:linear-gradient(90deg,var(--blue),var(--yellow));color:#fff;padding:25px;text-align:center;position:relative}
header img{height:70px}
.logout{position:absolute;top:20px;right:20px;padding:10px 15px;background:#9e9e9e;border:none;border-radius:8px;color:#fff;cursor:pointer}
.container{max-width:1100px;margin:40px auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:25px}
.portal{background:#fff;border-radius:18px;padding:25px;text-align:center;box-shadow:0 14px 30px rgba(0,0,0,.25)}
.portal h2{color:var(--blue)}
.portal button{margin-top:15px;padding:10px 25px;border:none;border-radius:30px;color:#fff;font-weight:600;cursor:pointer}
.portal:nth-child(1) button{background:#fbc02d;color:#333}
.portal:nth-child(2) button{background:#1976d2}
.portal:nth-child(3) button{background:#2e7d32}
.portal:nth-child(4) button{background:#6a1b9a}
.portal:nth-child(5) button{background:#c62828}

.modal{display:none;position:fixed;inset:0;background:rgba(13,71,161,.85);display:flex;justify-content:center;align-items:center;z-index:10}
.box{background:#fff;padding:25px;border-radius:18px;width:90%;max-width:400px}
input,select{width:100%;padding:10px;margin:8px 0;border-radius:8px;border:1px solid #ccc}
.full{width:100%;padding:12px;background:linear-gradient(90deg,var(--blue),var(--yellow));border:none;color:#fff;border-radius:25px;font-weight:600;cursor:pointer}
.link{text-align:center;color:var(--blue);cursor:pointer;font-size:13px;margin-top:8px}
.msg{font-size:13px;text-align:center}
.portal-content{display:none;max-width:900px;margin:20px auto;padding:20px;background:#fff;border-radius:15px;box-shadow:0 10px 20px rgba(0,0,0,.2)}
.portal-content h2{color:var(--blue)}
.portal-content table{width:100%;border-collapse:collapse;margin-top:15px}
.portal-content th,td{border:1px solid #ccc;padding:8px;text-align:left}
.portal-content th{background:var(--blue);color:#fff}
button.back{margin-top:15px;background:#9e9e9e;color:#fff;border:none;padding:10px 20px;border-radius:8px;cursor:pointer}
</style>
</head>
<body>

<header>
<img src="files/msambweni-logo.png" alt="Logo">
<h1>Msambweni Technical & Vocational College</h1>
<p>Complete College Portal</p>
<button class="logout" onclick="logout()">Logout / Home</button>
</header>

<div class="container" id="portalHome">
  <div class="portal"><h2>üìö Library Portal</h2><button onclick="openPortal('library')">Enter</button></div>
  <div class="portal"><h2>üíª Masomo Portal</h2><button onclick="openPortal('masomo')">Enter</button></div>
  <div class="portal"><h2>üí∞ Finance Portal</h2><button onclick="openPortal('finance')">Enter</button></div>
  <div class="portal"><h2>üéì Student Portal</h2><button onclick="openPortal('student')">Enter</button></div>
  <div class="portal"><h2>üßë‚Äçüíº Staff / Admin Portal</h2><button onclick="openPortal('admin')">Enter</button></div>
</div>

<!-- Auth Modal -->
<div id="authModal" class="modal">
  <div class="box" id="loginBox">
    <h3>Login</h3>
    <input id="loginUser" placeholder="Username">
    <input id="loginPass" type="password" placeholder="Password">
    <button class="full" onclick="login()">Login</button>
    <div class="link" onclick="showRegister()">Create account</div>
    <div class="link" onclick="showForgot()">Forgot password?</div>
    <p class="msg" id="loginMsg"></p>
  </div>

  <div class="box" id="registerBox" style="display:none">
    <h3>Create Account</h3>
    <input id="regName" placeholder="Full Name">
    <input id="regUser" placeholder="Username">
    <input id="regPass" type="password" placeholder="Password">
    <select id="regRole">
      <option value="student">Student</option>
      <option value="lecturer">Lecturer</option>
      <option value="finance">Finance</option>
      <option value="admin">Admin</option>
    </select>
    <button class="full" onclick="register()">Register</button>
    <div class="link" onclick="showLogin()">Back to login</div>
    <p class="msg" id="regMsg"></p>
  </div>

  <div class="box" id="forgotBox" style="display:none">
    <h3>Recover Password</h3>
    <input id="fpUser" placeholder="Username">
    <button class="full" onclick="forgot()">Recover</button>
    <div class="link" onclick="showLogin()">Back to login</div>
    <p class="msg" id="fpMsg"></p>
  </div>
</div>

<!-- Portal Content -->
<div id="portalContent" class="portal-content">
  <h2 id="portalTitle"></h2>
  <div id="portalData"></div>
  <button class="back" onclick="backHome()">Back to Home</button>
</div>

<script>
let users = JSON.parse(localStorage.getItem('users')||'[]');
let currentUser = null;

function saveUsers(){localStorage.setItem('users', JSON.stringify(users))}

function resetAuth(){
  loginBox.style.display='block';
  registerBox.style.display='none';
  forgotBox.style.display='none';
  loginUser.value='';loginPass.value='';
  loginMsg.innerText='';regMsg.innerText='';fpMsg.innerText='';
}

function showRegister(){loginBox.style.display='none';registerBox.style.display='block';forgotBox.style.display='none';}
function showLogin(){resetAuth();}
function showForgot(){loginBox.style.display='none';registerBox.style.display='none';forgotBox.style.display='block';}

function register(){
  if(!regName.value||!regUser.value||!regPass.value){regMsg.innerText='All fields required';return;}
  if(users.find(u=>u.user===regUser.value)){regMsg.innerText='User exists';return;}
  users.push({name:regName.value,user:regUser.value,pass:regPass.value,role:regRole.value});
  saveUsers();regMsg.style.color='green';regMsg.innerText='Account created';setTimeout(showLogin,1000);
}

function login(){
  const u = users.find(x=>x.user===loginUser.value && x.pass===loginPass.value);
  if(!u){loginMsg.innerText='Invalid login';return;}
  currentUser = u;
  authModal.style.display='none';
  portalHome.style.display='grid';
  alert(`Welcome ${u.name}!`);
}

function forgot(){
  const u = users.find(x=>x.user===fpUser.value);
  if(!u){fpMsg.innerText='User not found';return;}
  fpMsg.style.color='green';fpMsg.innerText='Password: '+u.pass;
}

function openPortal(name){
  if(!currentUser){authModal.style.display='flex';resetAuth();return;}
  portalHome.style.display='none';
  portalContent.style.display='block';
  portalTitle.innerText = name.toUpperCase()+' PORTAL';
  let dataHTML = '';

  if(name==='student'){
    dataHTML += `<h3>My Courses</h3>
    <table>
      <tr><th>Course</th><th>Grade</th></tr>
      <tr><td>Networking</td><td>A</td></tr>
      <tr><td>Electronics</td><td>B+</td></tr>
    </table>
    <h3>Announcements</h3><ul><li>Semester starts Feb 2026</li><li>Library books due March</li></ul>`;
  } else if(name==='finance'){
    dataHTML += `<h3>Fees Status</h3>
    <table>
      <tr><th>Semester</th><th>Status</th></tr>
      <tr><td>2026 Semester 1</td><td>Paid</td></tr>
      <tr><td>2026 Semester 2</td><td>Pending</td></tr>
    </table>`;
  } else if(name==='admin'){
    dataHTML += `<h3>All Users</h3>
    <table>
      <tr><th>Name</th><th>Username</th><th>Role</th></tr>`;
    users.forEach(u=>{dataHTML+=`<tr><td>${u.name}</td><td>${u.user}</td><td>${u.role}</td></tr>`;});
    dataHTML += `</table>`;
  } else if(name==='masomo'){
    dataHTML += `<h3>Masomo Resources</h3>
    <ul><li><a href="#">Networking Notes PDF</a></li>
        <li><a href="#">Electronics Lab Manual</a></li></ul>`;
  } else if(name==='library'){
    dataHTML += `<h3>Library Resources</h3>
    <ul><li><a href="#">TVET Reference Books</a></li>
        <li><a href="#">Past Exam Papers</a></li></ul>`;
  } else{
    dataHTML='No content yet.';
  }

  portalData.innerHTML = dataHTML;
}

function logout(){
  currentUser=null;
  portalHome.style.display='grid';
  portalContent.style.display='none';
  authModal.style.display='flex';
  resetAuth();
}

function backHome(){
  portalContent.style.display='none';
  portalHome.style.display='grid';
}
</script>

</body>
</html>
