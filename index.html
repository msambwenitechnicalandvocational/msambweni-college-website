<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Msambweni TVC Complete Portal</title>
<style>
:root {--blue:#0d47a1; --yellow:#fbc02d;}
body{margin:0;font-family:'Segoe UI',Arial,sans-serif;background:#f4f7fb;color:#333;}
header{background:linear-gradient(90deg,var(--blue),var(--yellow));color:#fff;padding:25px 15px;text-align:center;box-shadow:0 6px 15px rgba(0,0,0,0.25);}
header img{height:70px;margin-bottom:10px;}
.container{max-width:1100px;margin:40px auto;padding:20px;display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:25px;}
.portal{background:#fff;border-radius:18px;padding:28px 22px;box-shadow:0 14px 30px rgba(0,0,0,0.25);text-align:center;position:relative;overflow:hidden;}
.portal::before{content:"";position:absolute;top:0;left:0;width:100%;height:6px;background:linear-gradient(90deg,var(--yellow),var(--blue));}
.portal h2{margin-top:10px;color:var(--blue);}
.portal button{margin-top:18px;padding:11px 26px;border:none;border-radius:30px;font-weight:600;cursor:pointer;transition:all .3s ease;color:#fff;}
.portal:nth-child(1) button{background:#fbc02d;color:#333;}
.portal:nth-child(2) button{background:#1976d2;}
.portal:nth-child(3) button{background:#2e7d32;}
.portal:nth-child(4) button{background:#6a1b9a;}
.portal:nth-child(5) button{background:#c62828;}
.portal button:hover{transform:translateY(-3px);box-shadow:0 8px 18px rgba(0,0,0,0.25);opacity:.95;}
.modal{display:none;position:fixed;inset:0;background:rgba(13,71,161,.85);justify-content:center;align-items:center;z-index:10;}
.box{background:#fff;padding:28px;border-radius:18px;width:90%;max-width:420px;box-shadow:0 15px 35px rgba(0,0,0,0.35);}
.box h3{text-align:center;color:var(--blue);margin-top:10px;margin-bottom:5px;}
input,select,textarea{width:100%;padding:11px;margin:9px 0;border-radius:10px;border:1px solid #ccc;}
button.full{width:100%;background:linear-gradient(90deg,var(--blue),var(--yellow));color:#fff;font-weight:600;border-radius:25px;border:none;cursor:pointer;}
button.full:hover{opacity:.9;}
.link{text-align:center;color:var(--blue);cursor:pointer;font-size:13px;margin-top:8px;}
.logout{background:#9e9e9e !important;margin-top:18px;}
button.submit{background:linear-gradient(90deg,var(--blue),var(--yellow));color:#fff;width:100%;padding:12px;font-weight:600;border-radius:25px;border:none;cursor:pointer;}
button.submit:hover{opacity:.9;}
footer{width:100%;margin-top:50px;font-family:'Segoe UI',Arial,sans-serif;}
.footer-top{background:linear-gradient(90deg,#0d47a1,#1976d2);color:#fff;padding:25px;text-align:center;}
.footer-links{background:linear-gradient(90deg,#fbc02d,#ffeb3b);color:#333;padding:30px;text-align:center;display:flex;flex-wrap:wrap;justify-content:center;gap:15px;}
.footer-column{display:flex;flex-direction:column;min-width:120px;align-items:center;}
.footer-column strong{margin-bottom:10px;font-size:18px;}
.footer-btn{display:inline-block;padding:10px 20px;margin:5px 0;background:#0d47a1;color:#fff;border-radius:25px;text-decoration:none;font-weight:600;transition:all .3s ease;}
.footer-btn:hover{background:#1976d2;transform:translateY(-2px);}
.footer-bottom{background:linear-gradient(90deg,#0d47a1,#1976d2);color:#fff;padding:20px;text-align:center;font-size:14px;}
@media (max-width:768px){.footer-links{flex-direction:column;}.footer-btn{width:80%;margin:5px auto;}}
</style>
</head>
<body>
<header>
<img src="files/msambweni-logo.png" alt="Msambweni TVC Logo" />
<h1>Msambweni Technical & Vocational College</h1>
<p>Complete College Portal</p>
</header>

<div class="container" id="portalHome">
<div class="portal"><h2>üìö Library Portal</h2><p>Access library resources.</p><button onclick="openPortal('library')">Enter</button></div>
<div class="portal"><h2>üíª Masomo Portal</h2><p>Notes, assignments, exams.</p><button onclick="openPortal('masomo')">Enter</button></div>
<div class="portal"><h2>üí∞ Finance Portal</h2><p>Student fee records.</p><button onclick="openPortal('finance')">Enter</button></div>
<div class="portal"><h2>üéì Student Portal</h2><p>Announcements & courses.</p><button onclick="openPortal('student')">Enter</button></div>
<div class="portal"><h2>üßë‚Äçüíº Staff / Lecturer / Admin Portal</h2><p>Staff & admin access.</p><button onclick="openPortal('admin')">Enter</button></div>
</div>

<div class="modal" id="authModal">
  <div class="box" id="loginBox">
    <div style="text-align:center;margin-bottom:10px"><img src="files/msambweni-logo.png" style="height:70px" /></div>
    <h3>Portal Login</h3>
    <input id="loginUser" placeholder="Username / Admission No" />
    <input id="loginPass" type="password" placeholder="Password" />
    <button class="full" onclick="login()">Login</button>
    <div class="link" onclick="showRegister()">Create account</div>
    <div class="link" onclick="showForgot()">Forgot password?</div>
    <p id="loginMsg" class="msg"></p>
  </div>
  <div class="box" id="registerBox" style="display:none">
    <div style="text-align:center;margin-bottom:10px"><img src="files/msambweni-logo.png" style="height:70px" /></div>
    <h3>Create Account</h3>
    <input id="regName" placeholder="Full Name" />
    <input id="regUser" placeholder="Username / Admission No" />
    <input id="regPass" type="password" placeholder="Password" />
    <select id="regRole"><option value="student">Student</option><option value="lecturer">Lecturer</option><option value="support">Supporting Staff</option><option value="finance">Finance</option><option value="admin">Admin</option></select>
    <button class="full" onclick="register()">Register</button>
    <div class="link" onclick="showLogin()">Back to login</div>
    <p id="regMsg" class="msg"></p>
  </div>
  <div class="box" id="forgotBox" style="display:none">
    <div style="text-align:center;margin-bottom:10px"><img src="files/msambweni-logo.png" style="height:70px" /></div>
    <h3>Forgot Password</h3>
    <input id="fpUser" placeholder="Username / Admission No" />
    <button class="full" onclick="forgot()">Recover</button>
    <div class="link" onclick="showLogin()">Back to login</div>
    <p id="fpMsg" class="msg"></p>
  </div>
</div>

<footer>
  <div class="footer-top">
    <h2>Msambweni Technical & Vocational College</h2>
    <p>Empowering Students with Skills for the Future</p>
  </div>
  <div class="footer-links">
    <div class="footer-column">
      <strong>Quick Links</strong>
      <a href="https://www.cdacc.go.ke" target="_blank" class="footer-btn">CDACC</a>
      <a href="https://www.knec.ac.ke" target="_blank" class="footer-btn">KNEC</a>
      <a href="https://www.helb.co.ke" target="_blank" class="footer-btn">HELB</a>
      <a href="https://www.kuccps.net" target="_blank" class="footer-btn">KUCCPS</a>
      <a href="https://tvetlibrary.org" target="_blank" class="footer-btn">TVET Library</a>
      <a href="https://www.youtube.com/@MAMBWENI-TVC" target="_blank" class="footer-btn">YouTube</a>
    </div>
  </div>
  <div class="footer-bottom">
    <p>&copy; 2026 Msambweni Technical & Vocational College. All Rights Reserved.</p>
    <p>Address: P.O. Box 123, Msambweni, Kenya | Phone: 0743 774 601 | Email: info@msambwenitvc.ac.ke</p>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
let users = JSON.parse(localStorage.getItem('users')||'[]');
let currentUser = null;

window.onload = () => {
  document.getElementById('authModal').style.display='none'; // portals visible initially
  document.getElementById('portalHome').style.display='grid';
};

function saveUsers(){localStorage.setItem('users',JSON.stringify(users));}
function showRegister(){document.getElementById('loginBox').style.display='none';document.getElementById('registerBox').style.display='block';document.getElementById('forgotBox').style.display='none';}
function showLogin(){document.getElementById('loginBox').style.display='block';document.getElementById('registerBox').style.display='none';document.getElementById('forgotBox').style.display='none';}
function showForgot(){document.getElementById('loginBox').style.display='none';document.getElementById('registerBox').style.display='none';document.getElementById('forgotBox').style.display='block';}

function register(){
  const name=document.getElementById('regName').value;
  const user=document.getElementById('regUser').value;
  const pass=document.getElementById('regPass').value;
  const role=document.getElementById('regRole').value;
  if(users.find(u=>u.user===user)){document.getElementById('regMsg').innerText='User exists';return;}
  users.push({name,user,pass,role});saveUsers();document.getElementById('regMsg').style.color='green';document.getElementById('regMsg').innerText='Account created successfully';showLogin();
}

function login(){
  const u = users.find(x=>x.user===document.getElementById('loginUser').value && x.pass===document.getElementById('loginPass').value);
  if(!u){document.getElementById('loginMsg').innerText='Invalid login'; return;}
  currentUser = u;
  document.getElementById('authModal').style.display='none';
  alert('Welcome '+u.name+'! Use portal buttons below based on your role.');
}

function forgot(){
  const u = users.find(x=>x.user===document.getElementById('fpUser').value);
  if(!u){document.getElementById('fpMsg').innerText='User not found'; return;}
  document.getElementById('fpMsg').style.color='green'; document.getElementById('fpMsg').innerText='Password: '+u.pass;
}

function openPortal(portal){
  if(!currentUser){alert('Please login first!');document.getElementById('authModal').style.display='flex'; return;}
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.text(portal.toUpperCase()+' Portal Data - Msambweni TVC',20,20);
  let y=30;
  if(currentUser.role==='admin'){
    users.forEach(u=>{doc.text(u.name+' | '+u.user+' | '+u.role,20,y); y+=10;});
  } else {
    doc.text('Name: '+currentUser.name,20,y); y+=10;
    doc.text('Username: '+currentUser.user,20,y); y+=10;
    doc.text('Role: '+currentUser.role,20,y); y+=10;
    if(currentUser.role==='student') doc.text('Fees & Results Placeholder',20,y);
  }
  doc.save(portal+'_data.pdf');
  alert(portal+' portal opened. PDF downloaded.');
}
</script>
</body>
</html>
