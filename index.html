<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MSAMBWENI TVC</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<!-- PWA Manifest -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0d47a1">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="MSAMBWENI TVC">
<link rel="icon" sizes="192x192" href="icon-192.png">
<link rel="apple-touch-icon" href="icon-192.png">

<style>
:root{
--blue:#0d47a1;
--blue-light:#1976d2;
--yellow:#fbc02d;
--bg:#f4f6f9;
}

*{margin:0;padding:0;box-sizing:border-box;font-family:'Roboto',sans-serif;}
body{background:#f4f6f9;color:#333;}
img{max-width:100%;border-radius:8px;}
a{text-decoration:none;color:inherit}

/* Header */
header{background:var(--blue);color:#fff;position:sticky;top:0;z-index:1000;}
nav{max-width:1200px;margin:auto;padding:1rem;}
.nav-row{display:flex;justify-content:space-between;align-items:center;}
.logo{display:flex;align-items:center;gap:10px;font-size:1.2rem;font-weight:bold;}
.logo img{width:60px;height:60px;}
.menu-toggle{display:none;font-size:1.8rem;cursor:pointer;}
nav ul{list-style:none;display:flex;gap:1rem;}
nav ul li a{color:white;font-weight:500;}
@media(max-width:768px){
.menu-toggle{display:block;}
nav ul{display:none;flex-direction:column;background:var(--blue);padding:1rem;margin-top:1rem;border-radius:10px;}
nav ul.show{display:flex;}
}

/* Hero */
#hero{background:linear-gradient(135deg,var(--blue),var(--blue-light));color:white;text-align:center;padding:4rem 1rem;}
#hero h1{font-size:clamp(1.6rem,5vw,2.5rem);}
#hero p{font-size:1.1rem;margin-top:10px;}

/* Sections */
section{padding:3rem 1rem;max-width:1200px;margin:auto;}
section h2{text-align:center;margin-bottom:2rem;color:var(--blue);border-bottom:3px solid var(--yellow);display:inline-block;padding-bottom:5px;}

/* About */
#about{background:#e3f2fd;}
.about-gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem;margin-top:2rem;}

/* Courses */
#courses{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1.5rem;}
.course{background:white;padding:1rem;border-radius:12px;box-shadow:0 4px 8px rgba(0,0,0,.1);}

/* Announcements */
#announcements{background:#e8f5e9;border-radius:12px;}
.announcement{background:#c8e6c9;padding:1rem;margin-bottom:1rem;border-radius:8px;}

/* Library */
#library{background:#f1f8e9;}
.library-gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;}

/* Footer */
footer{background:var(--blue);color:white;text-align:center;padding:1rem;margin-top:2rem;}

/* ===== PORTAL ===== */
#portal{display:none;min-height:100vh;background:linear-gradient(135deg,var(--blue),var(--blue-light));display:flex;align-items:center;justify-content:center;padding:1rem;}
.portal-box{width:100%;max-width:420px;background:white;border-radius:20px;padding:25px;box-shadow:0 25px 50px rgba(0,0,0,.3);}
.portal-logo{text-align:center;margin-bottom:15px;}
.portal-logo img{width:80px;height:80px;}
.portal-logo h2{color:var(--blue);}

/* Tabs */
.tabs{display:flex;border:2px solid var(--yellow);border-radius:12px;overflow:hidden;margin-bottom:15px;}
.tabs button{flex:1;padding:10px;border:none;background:#e3f2fd;font-weight:600;cursor:pointer;color:var(--blue);}
.tabs button.active{background:var(--yellow);}

/* Forms */
form{display:none;}
form.active{display:block;}
input{width:100%;padding:12px;margin-bottom:12px;border-radius:10px;border:1px solid #ccc;font-size:1rem;}
button.submit{width:100%;padding:12px;border:none;border-radius:10px;background:var(--blue);color:white;font-weight:600;font-size:1rem;cursor:pointer;}
.message{text-align:center;font-size:.9rem;}

/* Dashboard */
#dashboard{display:none;}
.card{background:var(--bg);padding:14px;border-radius:12px;margin-bottom:10px;border-left:6px solid var(--yellow);font-size:.95rem;}
.logout{background:#c62828!important;}
</style>
</head>

<body>

<header>
<nav>
<div class="nav-row">
<div class="logo"><img src="logo.jpg">MSAMBWENI TVC</div>
<div class="menu-toggle" onclick="toggleMenu()">☰</div>
</div>
<ul id="menu">
<li><a href="#hero">Home</a></li>
<li><a href="#about">About</a></li>
<li><a href="#courses">Courses</a></li>
<li><a href="#announcements">Announcements</a></li>
<li><a href="#library">Library</a></li>
<li><a href="#" onclick="openPortal()">Student Portal</a></li>
</ul>
</nav>
</header>

<section id="hero">
<h1>MSAMBWENI TECHNICAL AND VOCATIONAL COLLEGE</h1>
<p>Empowering skills, shaping the future</p>
</section>

<section id="about">
<h2>About Us</h2>
<p>We provide quality technical and vocational education.</p>
<div class="about-gallery">
<img src="campus1.jpg">
<img src="campus2.jpg">
<img src="campus3.jpg">
</div>
</section>

<section>
<h2>Our Courses</h2>
<div id="courses">
<div class="course"><h3>ICT</h3><p>Programming & Networking</p></div>
<div class="course"><h3>Business</h3><p>Entrepreneurship</p></div>
<div class="course"><h3>Engineering</h3><p>Technical Skills</p></div>
</div>
</section>

<section id="announcements">
<h2>Announcements</h2>
<div class="announcement">Admissions Ongoing</div>
<div class="announcement">Exams Begin Soon</div>
</section>

<section id="library">
<h2>Virtual Library</h2>
<div class="library-gallery">
<img src="library1.jpg">
<img src="library2.jpg">
<img src="library3.jpg">
</div>
</section>

<footer>© 2026 MSAMBWENI TVC</footer>

<!-- ===== PORTAL ===== -->
<div id="portal">
<div class="portal-box">

<div id="auth">
<div class="portal-logo"><img src="logo.jpg"><h2>Student Portal</h2></div>
<div class="tabs">
<button id="loginTab" class="active" onclick="showForm('login')">Login</button>
<button id="registerTab" onclick="showForm('register')">Register</button>
</div>

<form id="loginForm" class="active" onsubmit="login(event)">
<input id="loginEmail" type="email" placeholder="Email" required>
<input id="loginPassword" type="password" placeholder="Password" required>
<button class="submit">Login</button>
</form>

<form id="registerForm" onsubmit="register(event)">
<input id="regName" placeholder="Full Name" required>
<input id="regEmail" type="email" placeholder="Email" required>
<input id="regPassword" type="password" placeholder="Password" required>
<button class="submit">Create Account</button>
</form>

<div id="message" class="message"></div>
</div>

<div id="dashboard">
<div class="portal-logo"><h2>Dashboard</h2></div>
<div class="card">Name: <span id="dashName"></span></div>
<div class="card">Email: <span id="dashEmail"></span></div>
<div class="card">ID: <span id="dashId"></span></div>
<button class="submit" onclick="downloadPDF()">Download PDF</button>
<button class="submit logout" onclick="logout()">Logout</button>
</div>

</div>
</div>

<script>
/* MENU */
function toggleMenu(){document.getElementById("menu").classList.toggle("show");}
function openPortal(){document.getElementById("portal").style.display="flex";window.scrollTo(0,0);}

/* LocalStorage Keys */
const USERS_KEY="students", SESSION_KEY="session";

/* Helpers */
function getUsers(){return JSON.parse(localStorage.getItem(USERS_KEY))||[];}
function saveUsers(u){localStorage.setItem(USERS_KEY,JSON.stringify(u));}

/* Tabs */
function showForm(type){
document.querySelectorAll("form").forEach(f=>f.classList.remove("active"));
document.querySelectorAll(".tabs button").forEach(b=>b.classList.remove("active"));
document.getElementById(type+"Form").classList.add("active");
document.getElementById(type+"Tab").classList.add("active");
document.getElementById("message").innerText="";
}

/* Register */
function register(e){
e.preventDefault();
let users=getUsers();
if(users.find(u=>u.email===regEmail.value)){message.innerText="Account exists";return;}
users.push({id:"MTVC-"+Date.now(),name:regName.value,email:regEmail.value,password:regPassword.value});
saveUsers(users);
message.style.color="green";message.innerText="Account created";
}

/* Login */
function login(e){
e.preventDefault();
let u=getUsers().find(x=>x.email===loginEmail.value&&x.password===loginPassword.value);
if(!u){message.style.color="red";message.innerText="Invalid login";return;}
localStorage.setItem(SESSION_KEY,u.email);
loadDashboard();
}

/* Dashboard */
function loadDashboard(){
let email=localStorage.getItem(SESSION_KEY);
if(!email)return;
let u=getUsers().find(x=>x.email===email);
if(!u)return;
document.getElementById("auth").style.display="none";
document.getElementById("dashboard").style.display="block";
dashName.innerText=u.name;
dashEmail.innerText=u.email;
dashId.innerText=u.id;
}

/* Logout */
function logout(){localStorage.removeItem(SESSION_KEY);location.reload();}

/* PDF */
function downloadPDF(){
const {jsPDF}=window.jspdf;
let pdf=new jsPDF();
pdf.text("MSAMBWENI TVC STUDENT DETAILS",20,20);
pdf.text("Name: "+dashName.innerText,20,40);
pdf.text("Email: "+dashEmail.innerText,20,50);
pdf.text("ID: "+dashId.innerText,20,60);
pdf.save("student_details.pdf");
}

/* Auto load dashboard if session exists */
loadDashboard();

/* Register service worker */
if("serviceWorker" in navigator){
navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</html>
