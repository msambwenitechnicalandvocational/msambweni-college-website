
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Msambweni Technical & Vocational College</title>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
}

body{
  font-family:"Segoe UI", Arial, sans-serif;
  background:#f4f6fb;
  color:#222;
}

/* ===== TOP MOST BANNER ===== */
.top-banner{
  background:linear-gradient(135deg,#0b3c91,#1565c0,#1e88e5);
  color:#fff;
  text-align:center;
  padding:50px 20px;
}

.top-banner h1{
  font-size:2.6rem;
  font-weight:900;
  letter-spacing:2px;
}

/* ===== SECOND HEADER ===== */
.sub-header{
  background:#ffffff;
  box-shadow:0 4px 15px rgba(0,0,0,0.1);
  padding:30px 20px;
}

.sub-header-content{
  max-width:1200px;
  margin:auto;
  display:flex;
  align-items:center;
  justify-content:space-between;
  flex-wrap:wrap;
}

/* BIGGER LOGOS */
.logo{
  width:140px;
  height:auto;
}

/* NAVIGATION */
nav{
  width:100%;
  margin-top:25px;
}

nav ul{
  list-style:none;
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  gap:22px;
}

nav ul li a{
  text-decoration:none;
  color:#0b3c91;
  font-weight:700;
  padding:10px 18px;
  border-radius:8px;
  transition:0.3s;
}

nav ul li a:hover{
  background:#0b3c91;
  color:#fff;
}

/* ===== HERO SECTION ===== */
.hero{
  min-height:85vh;
  background:
    linear-gradient(rgba(0,0,0,0.65),rgba(0,0,0,0.65)),
    url("college-hero.jpg") center/cover no-repeat;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:60px 20px;
  text-align:center;
}

.hero-content{
  max-width:1000px;
  color:#fff;
}

.hero-content h2{
  font-size:2.4rem;
  margin-bottom:15px;
}

.hero-content h3{
  font-size:1.5rem;
  color:#ffeb3b;
  margin-bottom:25px;
}

.hero-content p{
  font-size:1.1rem;
  line-height:1.7;
  margin-bottom:35px;
}

/* BUTTON */
.hero-content a{
  display:inline-block;
  padding:16px 40px;
  background:linear-gradient(90deg,#ff9800,#ffc107);
  color:#000;
  font-weight:800;
  border-radius:30px;
  text-decoration:none;
  transition:0.3s;
}

.hero-content a:hover{
  transform:translateY(-4px);
  box-shadow:0 10px 25px rgba(0,0,0,0.4);
}

/* ===== INFO CARDS ===== */
.info-cards{
  display:flex;
  justify-content:center;
  gap:30px;
  flex-wrap:wrap;
  margin-top:45px;
}

.card{
  background:rgba(255,255,255,0.18);
  backdrop-filter:blur(12px);
  padding:26px;
  border-radius:18px;
  width:300px;
  text-align:left;
  box-shadow:0 6px 20px rgba(0,0,0,0.3);
}

.card span{
  font-size:36px;
  display:block;
  margin-bottom:12px;
}

.card h4{
  font-size:1.2rem;
  margin-bottom:10px;
  color:#ffeb3b;
}

.card p{
  font-size:0.95rem;
  line-height:1.6;
}

/* ===== RESPONSIVE ===== */
@media(max-width:768px){
  .top-banner h1{
    font-size:1.9rem;
  }

  .logo{
    width:110px;
  }

  .hero-content h2{
    font-size:1.8rem;
  }

  .hero-content h3{
    font-size:1.25rem;
  }

  .card{
    width:100%;
    max-width:340px;
  }
}
</style>
</head>

<body>

<!-- TOP MOST BANNER -->
<div class="top-banner">
  <h1>MSAMBWENI TECHNICAL AND VOCATIONAL COLLEGE</h1>
</div>

<!-- SECOND HEADER -->
<div class="sub-header">
  <div class="sub-header-content">
    <img src="knec.png" class="logo" alt="Left Logo">
    <img src="logo.jpg" class="logo" alt="Right Logo">
  </div>

  <nav>
    <ul>
      <li><a href="#home">Home</a></li>
      <li><a href="#about">About</a></li>
      <li><a href="#courses">Courses</a></li>
      <li><a href="#admissions">Admissions</a></li>
      <li><a href="#portal">Student Portal</a></li>
      <li><a href="#contact">Contact</a></li>
    </ul>
  </nav>
</div>

<!-- HERO SECTION -->
<section class="hero" id="home">
  <div class="hero-content">
    <h2>Welcome to Msambweni TVC</h2>
    <h3>Empowering Skills ‚Ä¢ Building Careers ‚Ä¢ Transforming Lives</h3>

    <p>
      Msambweni Technical and Vocational College is a public TVET institution
      committed to delivering industry-relevant, competency-based training
      aligned with national development goals.
    </p>

    <a href="#admissions">Apply Now</a>

    <!-- INFORMATION CARDS -->
    <div class="info-cards">

      <div class="card">
        <span>üéì</span>
        <h4>Accreditation</h4>
        <p>
          Fully accredited by TVET Authority (TVETA) and CDACC,
          offering nationally recognized certificates and diplomas.
        </p>
      </div>

      <div class="card">
        <span>üìö</span>
        <h4>Accredited Courses</h4>
        <p>
          ICT, Electrical & Electronics, Mechanical Engineering,
          Welding & Fabrication, Building Construction,
          Plumbing, Fashion & Design, Hairdressing,
          Business Management, Procurement,
          Social Work & Community Development.
        </p>
      </div>

      <div class="card">
        <span>üóìÔ∏è</span>
        <h4>Admissions & Intakes</h4>
       
      </div>

    </div>
  </div>
</section>

</body>
</html>



<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MTVC Student Portal</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;background:#f4f6f8;color:#333;}
.header{display:flex;justify-content:space-between;align-items:center;padding:15px 30px;background:#0d47a1;color:#fff;box-shadow:0 4px 12px rgba(0,0,0,0.1);}
.header h1{font-size:22px;}
.header .welcome{font-weight:bold;font-size:14px;}
.container{max-width:600px;margin:50px auto;padding:30px;background:#fff;border-radius:12px;box-shadow:0 8px 25px rgba(0,0,0,0.15);}
label{font-weight:600;margin-top:12px;display:block;}
input{width:100%;padding:10px;margin-top:6px;border:1px solid #ccc;border-radius:8px;font-size:14px;}
button{width:100%;padding:12px;margin-top:18px;border:none;background:#0d47a1;color:#fff;font-size:15px;border-radius:8px;cursor:pointer;transition:.3s;font-weight:bold;}
button:hover{background:#093373;}
.link{color:#0d47a1;cursor:pointer;text-align:center;margin-top:12px;display:block;}
.msg{text-align:center;margin-top:12px;font-weight:bold;color:green;}
#errorMsg{text-align:center;color:red;margin-top:10px;font-weight:bold;}
#dashboard{display:none;margin-left:0;padding:20px;transition:margin-left 0.3s;}
.menu{display:flex;justify-content:flex-start;gap:10px;margin-bottom:20px;}
.menu button{padding:8px 15px;background:#1565c0;color:#fff;border:none;border-radius:6px;cursor:pointer;transition:.3s;font-weight:bold;}
.menu button:hover{background:#0b3c91;}
table{width:100%;border-collapse:collapse;margin-top:10px;}
th, td{border:1px solid #ccc;padding:8px;text-align:left;}
th{background:#0d47a1;color:#fff;}
</style>
</head>
<body>

<div class="header">
  <h1>MSAMBWENI TECHNICAL AND VOCATIONAL COLLEGE</h1>
  <div class="welcome" id="welcome"></div>
</div>

<!-- Auth Forms -->
<div class="container" id="authCard">
  <!-- Login -->
  <div id="loginForm">
    <h2 style="text-align:center;margin-bottom:15px;">Student Login</h2>
    <label>Email</label><input type="email" id="loginEmail">
    <label>Password</label><input type="password" id="loginPassword">
    <button id="loginBtn">Login</button>
    <span class="link" id="showCreate">Create Account</span>
    <span class="link" id="showReset">Forgot Password?</span>
    <div class="msg" id="msg"></div>
  </div>

  <!-- Register -->
  <div id="createForm" style="display:none;">
    <h2 style="text-align:center;margin-bottom:15px;">Create Account</h2>
    <label>Full Name</label><input type="text" id="fullname">
    <label>Registration Number</label><input type="text" id="regno">
    <label>ID Number</label><input type="text" id="idno">
    <label>Year of Admission</label><input type="number" id="year">
    <label>Email</label><input type="email" id="email">
    <label>Password</label><input type="password" id="pass">
    <label>Confirm Password</label><input type="password" id="confirm">
    <button id="signupBtn">Create Account</button>
    <span class="link" id="backLogin1">Back to Login</span>
    <div class="msg" id="createMsg"></div>
  </div>

  <!-- Reset -->
  <div id="resetForm" style="display:none;">
    <h2 style="text-align:center;margin-bottom:15px;">Reset Password</h2>
    <label>Email</label><input type="email" id="resetEmail">
    <button id="resetBtn">Send Reset Link</button>
    <span class="link" id="backLogin2">Back to Login</span>
    <div class="msg" id="msgReset"></div>
  </div>
</div>

<!-- Dashboard -->
<div class="container" id="dashboard">
  <div class="menu">
    <button onclick="selectMenu('results')">üìä Results</button>
    <button onclick="selectMenu('fees')">üí∞ Fee Statement</button>
    <button onclick="selectMenu('attendance')">‚úÖ Attendance</button>
    <button onclick="logout()">üö™ Logout</button>
  </div>

  <div id="results" style="display:none;">
    <h3>üìä Results</h3>
    <div id="resultsData"></div>
    <button onclick="downloadResultsPDF()">üì• Download Results</button>
  </div>

  <div id="fees" style="display:none;">
    <h3>üí∞ Fee Statements</h3>
    <div id="feesData"></div>
    <button onclick="downloadFeesPDF()">üì• Download Fee Statement</button>
  </div>

  <div id="attendance" style="display:none;">
    <h3>‚úÖ Sign Attendance</h3>
    <label>Date</label><input type="date" id="attDate">
    <button onclick="signAttendance()">Sign Attendance</button>
    <div class="msg" id="attMsg"></div>
    <button onclick="downloadAttendancePDF()">üì• Download Attendance PDF</button>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

<script>
// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyAhiabnqiPW1Y_USf7r_UW2KymUyfiYmVs",
  authDomain: "studentregistration-b3f93.firebaseapp.com",
  projectId: "studentregistration-b3f93",
  storageBucket: "studentregistration-b3f93.appspot.com",
  messagingSenderId: "429282074438",
  appId: "1:429282074438:web:37c43b51a9504f793ecf47"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

// DOM
const authCard = document.getElementById("authCard");
const loginForm = document.getElementById("loginForm");
const createForm = document.getElementById("createForm");
const resetForm = document.getElementById("resetForm");
const dashboard = document.getElementById("dashboard");

// Toggle forms
document.getElementById("showCreate").onclick = ()=>{loginForm.style.display="none"; createForm.style.display="block";}
document.getElementById("showReset").onclick = ()=>{loginForm.style.display="none"; resetForm.style.display="block";}
document.getElementById("backLogin1").onclick = ()=>{createForm.style.display="none"; loginForm.style.display="block";}
document.getElementById("backLogin2").onclick = ()=>{resetForm.style.display="none"; loginForm.style.display="block";}

// Auth state
auth.onAuthStateChanged(user=>{
  if(user){
    authCard.style.display="none"; dashboard.style.display="block";
    document.getElementById("welcome").innerText=`üéì Welcome ${user.email}`;
    loadResults(); loadFees();
  } else { authCard.style.display="block"; dashboard.style.display="none"; document.getElementById("welcome").innerText=""; }
});

// Login
document.getElementById("loginBtn").onclick = ()=>{
  const email=document.getElementById("loginEmail").value;
  const pass=document.getElementById("loginPassword").value;
  auth.signInWithEmailAndPassword(email,pass).catch(err=>alert(err.message));
}

// Register
document.getElementById("signupBtn").onclick = ()=>{
  const fullname=document.getElementById("fullname").value;
  const regno=document.getElementById("regno").value;
  const idno=document.getElementById("idno").value;
  const year=document.getElementById("year").value;
  const email=document.getElementById("email").value;
  const pass=document.getElementById("pass").value;
  const confirm=document.getElementById("confirm").value;
  const msgDiv=document.getElementById("createMsg");

  if(!fullname||!regno||!idno||!year||!email||!pass||!confirm){ msgDiv.innerText="All fields required"; return; }
  if(pass!==confirm){ msgDiv.innerText="Passwords do not match"; return; }

  // check if account exists
  auth.fetchSignInMethodsForEmail(email).then(methods=>{
    if(methods.length>0){ msgDiv.innerText="Account with this email already exists"; }
    else{
      auth.createUserWithEmailAndPassword(email,pass).then(cred=>{
        db.collection("students").doc(cred.user.uid).set({fullname,regno,idno,year,email});
        msgDiv.innerText="Account created successfully! Please login.";
        createForm.style.display="none"; loginForm.style.display="block";
      }).catch(err=>msgDiv.innerText=err.message);
    }
  });
}

// Reset password
document.getElementById("resetBtn").onclick = ()=>{
  const email=document.getElementById("resetEmail").value;
  if(!email){ alert("Enter email"); return; }
  auth.sendPasswordResetEmail(email).then(()=>alert("Reset link sent ‚úÖ")).catch(err=>alert(err.message));
}

// Logout
function logout(){ auth.signOut(); selectMenu(''); }

// Menu
function selectMenu(id){
  ["results","fees","attendance"].forEach(sec=>document.getElementById(sec).style.display="none");
  if(id) document.getElementById(id).style.display="block";
}

// Load Fees
function loadFees(){
  const feesDiv=document.getElementById("feesData");
  db.collection("fees").where("studentId","==",auth.currentUser.uid).onSnapshot(snap=>{
    let html="<table><tr><th>Term</th><th>Amount</th><th>Paid</th><th>Balance</th><th>Date</th></tr>";
    snap.forEach(doc=>{ const f=doc.data(); html+=`<tr><td>${f.term}</td><td>${f.amount}</td><td>${f.paid}</td><td>${f.balance}</td><td>${f.date}</td></tr>`; });
    html+="</table>"; feesDiv.innerHTML=html;
  });
}

// Load Results
function loadResults(){
  const resultsDiv=document.getElementById("resultsData");
  db.collection("results").where("studentId","==",auth.currentUser.uid).onSnapshot(snap=>{
    let html="<table><tr><th>Course</th><th>Score</th><th>Grade</th></tr>";
    snap.forEach(doc=>{ const r=doc.data(); html+=`<tr><td>${r.course}</td><td>${r.score}</td><td>${r.grade}</td></tr>`; });
    resultsDiv.innerHTML=html;
  });
}

// Attendance
function signAttendance(){
  const date=document.getElementById("attDate").value;
  if(!date){ alert("Select date"); return; }
  db.collection("attendance").add({studentId:auth.currentUser.uid,date,timestamp:firebase.firestore.FieldValue.serverTimestamp()})
  .then(()=>alert("Attendance signed ‚úÖ")).catch(err=>alert(err.message));
}

// Download PDFs
function downloadAttendancePDF(){
  db.collection("attendance").where("studentId","==",auth.currentUser.uid).get().then(snap=>{
    if(snap.empty){ alert("No attendance"); return; }
    const records=[]; snap.forEach((d,i)=>records.push([i+1,d.data().date]));
    const { jsPDF }=window.jspdf; const pdf=new jsPDF();
    pdf.setFontSize(16); pdf.text("MSAMBWENI TECHNICAL AND VOCATIONAL COLLEGE",105,10,{align:"center"});
    pdf.setFontSize(14); pdf.text("Attendance Records",105,20,{align:"center"});
    pdf.autoTable({startY:30,head:[['S/N','Date']],body:records,theme:'grid',headStyles:{fillColor:[13,71,161]}});
    pdf.save("Attendance.pdf");
  });
}

function downloadFeesPDF(){
  db.collection("fees").where("studentId","==",auth.currentUser.uid).get().then(snap=>{
    if(snap.empty){ alert("No fees"); return; }
    const records=[]; snap.forEach(doc=>{ const f=doc.data(); records.push([f.term,f.amount,f.paid,f.balance,f.date]); });
    const { jsPDF}=window.jspdf; const pdf=new jsPDF();
    pdf.setFontSize(16); pdf.text("MSAMBWENI TECHNICAL AND VOCATIONAL COLLEGE",105,10,{align:"center"});
    pdf.setFontSize(14); pdf.text("Fee Statements",105,20,{align:"center"});
    pdf.autoTable({startY:30,head:[['Term','Amount','Paid','Balance','Date']],body:records,theme:'grid',headStyles:{fillColor:[13,71,161]}});
    pdf.save("Fees.pdf");
  });
}

function downloadResultsPDF(){
  db.collection("results").where("studentId","==",auth.currentUser.uid).get().then(snap=>{
    if(snap.empty){ alert("No results"); return; }
    const records=[]; snap.forEach(doc=>{ const r=doc.data(); records.push([r.course,r.score,r.grade]); });
    const { jsPDF}=window.jspdf; const pdf=new jsPDF();
    pdf.setFontSize(16); pdf.text("MSAMBWENI TECHNICAL AND VOCATIONAL COLLEGE",105,10,{align:"center"});
    pdf.setFontSize(14); pdf.text("Academic Results",105,20,{align:"center"});
    pdf.autoTable({startY:30,head:[['Course','Score','Grade']],body:records,theme:'grid',headStyles:{fillColor:[13,71,161]}});
    pdf.save("Results.pdf");
  });
}
</script>
</body>
</html>











<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MTVC College System</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

<style>
body{margin:0;font-family:Segoe UI,sans-serif;background:#f0f2f5}
header{height:60px;background:#0d47a1;color:#fff;display:flex;align-items:center;padding:0 20px;position:fixed;width:100%;z-index:2}
header img{height:40px;margin-right:10px}
#loginBox{width:360px;margin:100px auto;background:#fff;padding:25px;border-radius:10px;box-shadow:0 5px 20px rgba(0,0,0,0.2)}
#loginBox h3{text-align:center;color:#0d47a1}
input,select,button{width:100%;padding:12px;margin:8px 0;border-radius:6px;border:1px solid #ccc;font-size:14px}
button{background:#0d47a1;color:#fff;font-weight:bold;cursor:pointer;transition:0.3s}
button:hover{background:#093373}
#sidebar{width:220px;background:#1a237e;color:#fff;position:fixed;top:60px;bottom:0;padding-top:20px;display:none}
#sidebar a{display:block;padding:14px 20px;color:#fff;text-decoration:none;transition:0.3s}
#sidebar a:hover{background:#3949ab}
#content{margin-left:0;margin-top:60px;padding:20px;transition:0.3s}
.card{background:#fff;padding:20px;border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,0.1);margin-bottom:20px}
form{display:none}
form.active{display:block}
.msg{font-weight:bold;color:green;margin-top:10px}

/* TABLE */
.table{width:100%;border-collapse:collapse;margin-top:15px}
.table th,.table td{border:1px solid #ccc;padding:8px;text-align:center}
.table th{background:#0d47a1;color:#fff}
.table tr:nth-child(even){background:#f2f2f2}

/* BUTTONS */
.small-btn{padding:6px 12px;margin:4px;border-radius:6px;background:#0d47a1;color:#fff;border:none;cursor:pointer;transition:0.3s}
.small-btn:hover{background:#093373}

/* DASHBOARD CARDS */
.dashboard-cards{display:flex;flex-wrap:wrap;gap:15px;margin-top:15px}
.dashboard-card{flex:1 1 200px;background:#fff;padding:20px;border-radius:10px;color:#fff;font-weight:bold;text-align:center;box-shadow:0 5px 15px rgba(0,0,0,0.1);position:relative;transition:0.3s}
.dashboard-card h2{margin:10px 0;font-size:28px}
.dashboard-card span{font-size:14px;color:#f0f0f0}
.card-students{background:#1abc9c}
.card-staff{background:#3498db}
.card-fees{background:#e67e22}
.card-balance{background:#e74c3c}

/* RESPONSIVE */
@media(max-width:768px){.dashboard-cards{flex-direction:column;margin-left:0} #sidebar{position:relative;width:100%;height:auto}}
</style>
</head>
<body>

<!-- LOGIN / SIGNUP -->
<div id="loginBox">
  <h3>MTVC Secure Login</h3>
  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <select id="role">
    <option value="">Select Role</option>
    <option value="student">Student</option>
    <option value="staff">Staff</option>
    <option value="finance">Finance</option>
    <option value="admin">Admin</option>
  </select>
  <button onclick="login()">Login</button>
  <button onclick="signup()">Create Account</button>
  <p id="loginMsg"></p>
</div>

<!-- HEADER -->
<header id="topBar" style="display:none">
  <img src="logo.png" alt="MTVC Logo">
  <h3>MSAMBWENI TECHNICAL & VOCATIONAL COLLEGE</h3>
</header>

<!-- SIDEBAR -->
<div id="sidebar">
  <a onclick="show('dashboard')">üè† Dashboard</a>
  <a id="mStudent" onclick="show('student')">üéì Students</a>
  <a id="mAcademics" onclick="show('academics')">üìò Academics</a>
  <a id="mFinance" onclick="show('finance')">üí∞ Finance</a>
  <a id="mStaff" onclick="show('staff')">üë®‚Äçüè´ Staff</a>
  <a id="mAdmin" onclick="show('admin')">‚öô Admin</a>
  <a onclick="logout()">üö™ Logout</a>
</div>

<!-- CONTENT -->
<div id="content">

  <!-- DASHBOARD -->
  <div class="card" id="dashboard">
    <h3>Dashboard</h3>
    <div class="dashboard-cards">
      <div class="dashboard-card card-students">
        <h2 id="totalStudents">0</h2>
        <span>Total Students</span>
      </div>
      <div class="dashboard-card card-staff">
        <h2 id="totalStaff">0</h2>
        <span>Total Staff</span>
      </div>
      <div class="dashboard-card card-fees">
        <h2 id="totalFees">0</h2>
        <span>Total Fees Paid</span>
      </div>
      <div class="dashboard-card card-balance">
        <h2 id="totalBalance">0</h2>
        <span>Total Balance</span>
      </div>
    </div>
  </div>

  <!-- STUDENT -->
  <form class="card" id="student">
    <h3>Student Registration</h3>
    <input id="stuName" placeholder="Name">
    <input id="stuReg" placeholder="Reg No">
    <input id="stuCourse" placeholder="Course">
    <button>Save</button>
    <p class="msg" id="stuMsg"></p>
  </form>

  <!-- ACADEMICS -->
  <form class="card" id="academics">
    <h3>Academics</h3>
    <input id="aReg" placeholder="Reg No">
    <input id="aUnit" placeholder="Unit">
    <input id="aScore" type="number" placeholder="Score">
    <button>Save & Grade</button>
    <p class="msg" id="aMsg"></p>
    <div id="transcript"></div>
    <h4>Existing Records</h4>
    <table class="table" id="academicsTable">
      <thead>
        <tr><th>Reg No</th><th>Unit</th><th>Score</th><th>Grade</th><th>Actions</th></tr>
      </thead>
      <tbody></tbody>
    </table>
    <button class="small-btn" onclick="downloadTranscript()">Download Transcript</button>
  </form>

  <!-- FINANCE -->
  <form class="card" id="finance">
    <h3>Finance</h3>
    <input id="fReg" placeholder="Reg No">
    <input id="fPaid" type="number" placeholder="Amount Paid">
    <button>Save & Generate Fee Statement</button>
    <p class="msg" id="fMsg"></p>
    <div id="feeStatement"></div>
    <button class="small-btn" onclick="downloadFee()">Download Fee Statement</button>
  </form>

  <!-- STAFF -->
  <form class="card" id="staff">
    <h3>Staff</h3>
    <input id="sName" placeholder="Name">
    <input id="sRole" placeholder="Role">
    <input id="sEmail" placeholder="Email">
    <input id="sPhone" placeholder="Phone">
    <input id="sDept" placeholder="Department">
    <button>Save</button>
    <p class="msg" id="sMsg"></p>
  </form>

  <!-- ADMIN -->
  <form class="card" id="admin">
    <h3>Admin Settings</h3>
    <input id="adName" placeholder="Setting">
    <button>Save</button>
    <p class="msg" id="adMsg"></p>
  </form>

</div>

<script>
firebase.initializeApp({
 apiKey:"AIzaSyAhiabnqiPW1Y_USf7r_UW2KymUyfiYmVs",
 authDomain:"studentregistration-b3f93.firebaseapp.com",
 projectId:"studentregistration-b3f93"
});
const auth=firebase.auth();
const db=firebase.firestore();

/* SAVE USER ROLE */
async function saveUserRole(cred, selectedRole){
  const userRef = db.collection("users").doc(cred.user.uid);
  await userRef.set({
    email: cred.user.email,
    role: selectedRole,
    createdAt: firebase.firestore.FieldValue.serverTimestamp()
  }, { merge:true });
}

/* LOGIN */
async function login(){
 try{
  const cred = await auth.signInWithEmailAndPassword(email.value,password.value);
  const doc = await db.collection("users").doc(cred.user.uid).get();
  if(!doc.exists || doc.data().role!==role.value) throw "Sorry, access denied!";
  loginBox.style.display="none";
  topBar.style.display="flex";
  sidebar.style.display="block";
  content.style.marginLeft="220px";
  content.style.display="block";
  applyRole(role.value);
  updateDashboard();
  loadAcademicsTable();
 }catch(e){loginMsg.innerText=e.message || e}
}

/* SIGNUP - SINGLE ACCOUNT PER ROLE */
async function signup(){
 if(!email.value || !password.value || !role.value){loginMsg.innerText="Fill all fields"; return;}
 try{
  // Check if account for this role already exists
  const existing = await db.collection("users").where("role","==",role.value).get();
  if(existing.size>0){
    loginMsg.innerText=`An account for role "${role.value}" already exists. Please use another role or delete existing account.`;
    return;
  }

  const cred = await auth.createUserWithEmailAndPassword(email.value,password.value);
  await saveUserRole(cred, role.value);
  loginMsg.innerText="Account created ‚úÖ";
 }catch(e){
   if(e.code==="auth/email-already-in-use"){
     loginMsg.innerText="Sorry, the email is already taken!";
   } else {loginMsg.innerText=e.message}
 }
}

/* ROLE MENU */
function applyRole(r){
 if(r==="student"){hide(["mStaff","mFinance","mAdmin"])}
 if(r==="staff"){hide(["mFinance","mAdmin"])}
 if(r==="finance"){hide(["mAcademics","mStaff","mAdmin"])}
}
function hide(arr){arr.forEach(id=>document.getElementById(id).style.display="none")}

/* NAV */
function show(id){
 document.querySelectorAll(".card,form").forEach(d=>d.style.display="none");
 document.getElementById(id).style.display="block";
 if(id==="dashboard") updateDashboard();
 if(id==="academics") loadAcademicsTable();
}

/* LOGOUT */
function logout(){auth.signOut();location.reload()}

/* DASHBOARD SUMMARY */
async function updateDashboard(){
 const studentsSnap = await db.collection("students").get();
 const staffSnap = await db.collection("staff").get();
 const financeSnap = await db.collection("finance").get();

 document.getElementById("totalStudents").innerText = studentsSnap.size;
 document.getElementById("totalStaff").innerText = staffSnap.size;

let totalPaid=0, totalBalance=0;
financeSnap.forEach(d=>{totalPaid+=d.data().paid; totalBalance+=d.data().balance});
document.getElementById("totalFees").innerText = totalPaid;
document.getElementById("totalBalance").innerText = totalBalance;
}

/* STUDENT SAVE */
student.onsubmit=e=>{
 e.preventDefault();
 db.collection("students").add({
   name:stuName.value,
   reg:stuReg.value,
   course:stuCourse.value
 });
 stuMsg.innerText="Saved ‚úÖ";
 stuName.value=""; stuReg.value=""; stuCourse.value="";
 updateDashboard();
}

/* ACADEMICS SAVE & GRADE WITH EDIT/DELETE */
let transcriptData=[];
let editId=null;

academics.onsubmit=e=>{
 e.preventDefault();
 const score = Number(aScore.value);
 let grade="";
 if(score>=80) grade="Mastery";
 else if(score>=60) grade="Proficient";
 else if(score>=40) grade="Competent";
 else grade="Not Competent";

 if(editId){ // EDIT
   db.collection("academics").doc(editId).set({ reg:aReg.value, unit:aUnit.value, score:score, grade:grade });
   aMsg.innerText=`Updated ‚úÖ Grade: ${grade}`;
   editId = null;
 } else { // NEW
   db.collection("academics").add({ reg:aReg.value, unit:aUnit.value, score:score, grade:grade });
   aMsg.innerText=`Saved ‚úÖ Grade: ${grade}`;
 }

 aUnit.value=""; aScore.value="";
 aReg.value="";

 loadAcademicsTable();
}

/* LOAD ACADEMICS TABLE */
async function loadAcademicsTable(){
 const tbody = document.querySelector("#academicsTable tbody");
 tbody.innerHTML="";
 transcriptData=[];
 const snap = await db.collection("academics").get();
 snap.forEach(doc=>{
   const d = doc.data();
   const tr = document.createElement("tr");
   tr.innerHTML=`<td>${d.reg}</td><td>${d.unit}</td><td>${d.score}</td><td>${d.grade}</td>
   <td>
     <button class="small-btn" onclick="editRecord('${doc.id}','${d.reg}','${d.unit}',${d.score})">Edit</button>
     <button class="small-btn" onclick="deleteRecord('${doc.id}')">Delete</button>
   </td>`;
   tbody.appendChild(tr);
   transcriptData.push({reg:d.reg,unit:d.unit,score:d.score,grade:d.grade});
 });
 updateTranscript();
}

/* EDIT RECORD */
function editRecord(id, reg, unit, score){
 editId=id;
 aReg.value=reg;
 aUnit.value=unit;
 aScore.value=score;
 aMsg.innerText="Editing record...";
}

/* DELETE RECORD */
function deleteRecord(id){
 if(confirm("Are you sure you want to delete this record?")){
   db.collection("academics").doc(id).delete();
   loadAcademicsTable();
   aMsg.innerText="Record deleted ‚úÖ";
 }
}

/* UPDATE TRANSCRIPT */
function updateTranscript(){
 let table=`<h4>MSAMBWENI TECHNICAL & VOCATIONAL COLLEGE</h4><table class="table">
 <tr><th>REG NO:</th><th>UNIT NAME:</th><th>SCORE</th><th>GRADE</th></tr>`;
 transcriptData.forEach(d=>{
   table+=`<tr><td>${d.reg}</td><td>${d.unit}</td><td>${d.score}</td><td>${d.grade}</td></tr>`;
 });
 table+="</table>";
 transcript.innerHTML=table;
}

/* DOWNLOAD TRANSCRIPT */
function downloadTranscript(){
 const blob = new Blob([transcript.innerHTML], {type:"application/msword;charset=utf-8"});
 saveAs(blob,"Transcript.doc");
}

/* FINANCE SAVE & CALCULATE BALANCE */
finance.onsubmit=e=>{
 e.preventDefault();
 const fees = 35000;
 const paid = Number(fPaid.value);
 const balance = fees - paid;

 db.collection("finance").add({reg:fReg.value,paid:paid,balance:balance});
 fMsg.innerText=`Saved! Balance: ${balance}`;

feeStatement.innerHTML=`<h4>MSAMBWENI TECHNICAL & VOCATIONAL COLLEGE</h4>
<table class="table">
<tr><th>Reg No</th><th>Total Fees</th><th>Paid</th><th>Balance</th></tr>
<tr><td>${fReg.value}</td><td>${fees}</td><td>${paid}</td><td>${balance}</td></tr>
</table>`;
fReg.value=""; fPaid.value="";
updateDashboard();
}

/* DOWNLOAD FEE STATEMENT */
function downloadFee(){
 const blob = new Blob([feeStatement.innerHTML], {type:"application/msword;charset=utf-8"});
 saveAs(blob,"FeeStatement.doc");
}

/* STAFF SAVE */
staff.onsubmit=e=>{
 e.preventDefault();
 db.collection("staff").add({
   name:sName.value,
   role:sRole.value,
   email:sEmail.value,
   phone:sPhone.value,
   dept:sDept.value
 });
 sMsg.innerText="Saved ‚úÖ";
 sName.value=""; sRole.value=""; sEmail.value=""; sPhone.value=""; sDept.value="";
 updateDashboard();
}

/* ADMIN SAVE */
admin.onsubmit=e=>{
 e.preventDefault();
 db.collection("admin").add({setting:adName.value});
 adMsg.innerText="Saved ‚úÖ";
 adName.value="";
}
</script>
</body>
</html>


 




 <!-- Footer -->
<footer class="footer">
  <div class="footer-container">
    
    <!-- About -->
    <div class="footer-section">
      <h3>About MTVC</h3>
      <p>Msambweni Technical & Vocational College is dedicated to providing high-quality technical and vocational education, preparing students for innovation, self-reliance, and leadership.</p>
    </div>

    <!-- Quick Links -->
    <div class="footer-section">
      <h3>Quick Links</h3>
      <ul>
        <li><a href="#home">Home</a></li>
        <li><a href="#admissions">Admissions</a></li>
        <li><a href="#departments">Departments</a></li>
        <li><a href="#news">News</a></li>
      </ul>
    </div>

    <!-- External Links -->
    <div class="footer-section">
      <h3>External Links</h3>
      <ul>
        <li><a href="https://kuccps.net" target="_blank">KUCCPS</a></li>
        <li><a href="https://www.helb.co.ke" target="_blank">HELB</a></li>
        <li><a href="https://www.tveta.go.ke" target="_blank">TVETA</a></li>
        <li><a href="https://www.tveta.go.ke/cdacc" target="_blank">CDACC</a></li>
      </ul>
    </div>

    <!-- Contact -->
    <div class="footer-section">
      <h3>Contact Us</h3>
      <p>Email: info@msambwenitvc.ac.ke</p>
      <p>Phone: +254 700 123 456</p>
      <p>Location: Msambweni, Kwale County, Kenya</p>
      <div class="social-icons">
        <a href="https://www.facebook.com/share/v/1FMM4x4nqn/" target="_blank" class="social-btn">üëç Facebook</a>
  <a href="https://youtu.be/vbJVuYkpyOg?si=x0hPpyEeXdPJdDcS" target="_blank" class="social-btn">‚ñ∂ YouTube</a>
<a href="https://students.kuccps.net/" target="_blank" class="social-btn">‚ñ∂KUCCPS</a>
<a href="https://www.helb.co.ke/" target="_blank" class="social-btn">‚ñ∂HELB</a>
<a href="https://www.tvetcdacc.go.ke/" target="_blank" class="social-btn">‚ñ∂CDACC</a>
 <a href="https://www.youtube.com/@MSAMBWENI-TVC" target="_blank" class="social-btn">‚ñ∂MTVC</a>


      </div>
    </div>

  </div>

  <!-- Bottom -->
  <div class="footer-bottom">
    <p>&copy; 2025 Msambweni Technical & Vocational College. All Rights Reserved.</p>
  </div>

  <!-- Back to Top -->
  <button id="backToTop" onclick="scrollToTop()">‚Üë Top</button>
</footer>

<!-- Footer CSS -->
<style>
.footer {
  background: linear-gradient(135deg, #1a3d7c, #2c7be5);
  color: #fff;
  padding: 50px 20px 20px;
  font-family: Arial, sans-serif;
  margin-top: 50px;
}
.footer-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 30px;
  max-width: 1200px;
  margin: 0 auto;
}
.footer-section h3 {
  font-size: 1.3rem;
  margin-bottom: 15px;
  border-bottom: 2px solid #ffcc00;
  display: inline-block;
  padding-bottom: 5px;
}
.footer-section p, .footer-section ul {
  font-size: 0.95rem;
  line-height: 1.6;
}
.footer-section ul {
  list-style: none;
  padding: 0;
}
.footer-section ul li {
  margin: 8px 0;
}
.footer-section ul li a {
  color: #ffeb99;
  text-decoration: none;
  font-weight: bold;
  transition: 0.3s;
}
.footer-section ul li a:hover {
  color: #fff;
  text-shadow: 0 0 8px #ffcc00, 0 0 12px #2c7be5;
}
.social-icons {
  margin-top: 15px;
}
.social-icons a img {
  width: 28px;
  height: 28px;
  margin-right: 12px;
  transition: transform 0.3s, filter 0.3s;
}
.social-icons a img:hover {
  transform: scale(1.2);
  filter: drop-shadow(0 0 6px #ffcc00);
}
#backToTop {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: #ffcc00;
  color: #333;
  border: none;
  border-radius: 50px;
  padding: 12px 20px;
  font-weight: bold;
  cursor: pointer;
  transition: 0.3s;
  display: none;
}
#backToTop:hover {
  background: #e6b800;
  color: #fff;
  box-shadow: 0 0 10px #ffcc00;
}
.footer-bottom {
  text-align: center;
  padding-top: 20px;
  border-top: 1px solid rgba(255,255,255,0.3);
  margin-top: 20px;
  font-size: 0.9rem;
  color: #ddd;
}
</style>

<!-- Back to Top Script -->
<script>
function scrollToTop() {
  window.scrollTo({ top: 0, behavior: 'smooth' });
}
window.onscroll = function () {
  let btn = document.getElementById("backToTop");
  if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
    btn.style.display = "block";
  } else {
    btn.style.display = "none";
  }
};
</script>
</body>
</html>





































































































































































































