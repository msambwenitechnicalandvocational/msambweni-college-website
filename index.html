<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Msambweni TVC Integrated Portal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- PDF LIBRARIES -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>

<style>
:root{
  --blue:#0d47a1;
  --light:#1976d2;
  --green:#2e7d32;
  --red:#c62828;
}
body{
  margin:0;
  font-family:Segoe UI,Arial;
  background:linear-gradient(135deg,var(--blue),var(--light));
}
.container{
  max-width:1100px;
  margin:auto;
  padding:20px;
}
.card{
  background:#fff;
  border-radius:16px;
  padding:25px;
  margin-bottom:25px;
  box-shadow:0 15px 40px rgba(0,0,0,.3);
}
h2,h3{
  text-align:center;
  color:var(--blue);
}
input,select{
  width:100%;
  padding:10px;
  margin:8px 0;
  border-radius:8px;
  border:1px solid #ccc;
}
button{
  padding:10px 18px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  color:#fff;
  margin:5px;
}
.login{background:var(--light)}
.logout{background:var(--red)}
.download{background:var(--green)}
.nav button{background:#1565c0}
.hidden{display:none}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:15px;
}
th,td{
  border:1px solid #ccc;
  padding:10px;
  text-align:center;
}
th{
  background:var(--light);
  color:#fff;
}
</style>
</head>

<body>
<div class="container">

<!-- LOGIN -->
<div id="loginCard" class="card">
<h2>Msambweni TVC Portal Login</h2>
<input id="username" placeholder="Username">
<input id="password" type="password" placeholder="Password">
<button class="login" onclick="login()">Login</button>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="card hidden">
<h2>Msambweni Technical & Vocational College</h2>
<div class="nav" style="text-align:center">
<button onclick="openPortal('finance')">Finance</button>
<button onclick="openPortal('ict')">ICT</button>
<button onclick="openPortal('library')">Library</button>
<button onclick="openPortal('exam')">Exams</button>
<button class="logout" onclick="logout()">Logout</button>
</div>
</div>

<!-- FINANCE PORTAL -->
<div id="finance" class="card hidden">
<h3>Finance Portal</h3>

<input id="sname" placeholder="Student Name">
<input id="regno" placeholder="Registration Number">

<h4>Fee Summary</h4>
<table>
<tr><th>Total Fees</th><th>Paid</th><th>Balance</th></tr>
<tr>
<td><input id="total" value="50000"></td>
<td><input id="paid" value="20000"></td>
<td id="balance">30000</td>
</tr>
</table>

<button class="download" onclick="calc()">Calculate Balance</button>

<h4>Payment History</h4>
<table id="payTable">
<tr><th>Date</th><th>Receipt No</th><th>Amount</th></tr>
<tr><td>10/01/2026</td><td>RC001</td><td>10,000</td></tr>
<tr><td>05/02/2026</td><td>RC002</td><td>10,000</td></tr>
</table>

<button class="download" onclick="feePDF()">Download Fee Statement PDF</button>
</div>

<!-- ICT PORTAL -->
<div id="ict" class="card hidden">
<h3>ICT Support Form</h3>
<input id="ictIssue" placeholder="Issue Type">
<input id="ictDevice" placeholder="Device / Serial Number">
<select id="ictStatus">
<option>Pending</option>
<option>Resolved</option>
</select>
<button class="download" onclick="simplePDF('ICT Support Request')">Download PDF</button>
</div>

<!-- LIBRARY PORTAL -->
<div id="library" class="card hidden">
<h3>Library Request Form</h3>
<input id="bookTitle" placeholder="Book Title">
<input id="bookAuthor" placeholder="Author">
<select id="libraryAction">
<option>Borrow</option>
<option>Return</option>
</select>
<button class="download" onclick="simplePDF('Library Request Form')">Download PDF</button>
</div>

<!-- EXAM PORTAL -->
<div id="exam" class="card hidden">
<h3>Exam Request Form</h3>
<input id="unitName" placeholder="Unit Name">
<select id="examType">
<option>Special Exam</option>
<option>Remark</option>
</select>
<button class="download" onclick="simplePDF('Exam Request Form')">Download PDF</button>
</div>

</div>

<script>
const { jsPDF } = window.jspdf;

function login(){
  if(username.value && password.value){
    loginCard.classList.add("hidden");
    dashboard.classList.remove("hidden");
  }else{
    alert("Please enter login details");
  }
}

function logout(){
  document.querySelectorAll('.card').forEach(c=>c.classList.add("hidden"));
  loginCard.classList.remove("hidden");
}

function openPortal(id){
  document.querySelectorAll('.card').forEach(c=>{
    if(c.id!=="dashboard") c.classList.add("hidden");
  });
  document.getElementById(id).classList.remove("hidden");
}

function calc(){
  let t=Number(total.value);
  let p=Number(paid.value);
  balance.innerText = t - p;
}

function feePDF(){
  const doc = new jsPDF();
  let y = 20;

  doc.setFontSize(14);
  doc.text("MSAMBWENI TECHNICAL & VOCATIONAL COLLEGE",105,y,{align:"center"});
  y+=10;
  doc.text("FEE STATEMENT",105,y,{align:"center"});

  doc.setFontSize(10);
  y+=15;
  doc.text(`Date & Time: ${new Date().toLocaleString()}`,20,y);
  y+=8;
  doc.text(`Student Name: ${sname.value}`,20,y);
  y+=8;
  doc.text(`Registration Number: ${regno.value}`,20,y);

  doc.autoTable({
    startY:y+10,
    head:[["Total Fees","Paid","Balance"]],
    body:[[total.value, paid.value, balance.innerText]]
  });

  doc.autoTable({
    startY:doc.lastAutoTable.finalY+10,
    head:[["Date","Receipt No","Amount"]],
    body:[
      ["10/01/2026","RC001","10,000"],
      ["05/02/2026","RC002","10,000"]
    ]
  });

  doc.text("Prepared by: Accounts Office",20,doc.lastAutoTable.finalY+15);
  doc.save("Fee_Statement.pdf");
}

function simplePDF(title){
  const doc = new jsPDF();
  doc.text("MSAMBWENI TECHNICAL & VOCATIONAL COLLEGE",105,20,{align:"center"});
  doc.text(title,105,35,{align:"center"});
  doc.text("Generated on: "+new Date().toLocaleString(),20,55);
  doc.save(title.replace(/ /g,"_")+".pdf");
}
</script>

</body>
</html>
